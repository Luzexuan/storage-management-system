仓库管理系统 - 更新日志
====================================

版本 1.2.1 - 2025-10-31
------------------------

【修复问题】
1. ✅ 修复页面切换时 500 错误
   - 问题：operation_logs 表缺少 'update_profile' 和 'change_password' 枚举值
   - 修复：添加数据库迁移脚本，扩展 operation_type ENUM

【数据库变更】
1. ✅ 数据库迁移 001：添加操作类型枚举值
   - 新增：'update_profile'（修改个人信息）
   - 新增：'change_password'（修改密码）
   - 位置：database/migrations/001_add_operation_types.sql

【升级说明】
⚠️ **必须执行数据库迁移**：
```bash
mysql -u storage_user -p storage_management < database/migrations/001_add_operation_types.sql
```

- PM2 零停机重启：pm2 reload ecosystem.config.js
- 前端刷新浏览器即可

====================================

版本 1.2.0 - 2025-10-29
------------------------

【新增功能】
1. ✅ 个人信息页面
   - 查看个人信息（用户名、角色、状态、注册时间）
   - 修改联系方式（邮箱、手机号）
   - 修改密码（验证当前密码，修改后自动退出）

2. ✅ 分类管理图形界面
   - 管理员可通过UI新增一级分类
   - 管理员可为任意分类添加子分类
   - 管理员可编辑分类（名称、描述、排序）
   - 管理员可删除分类（自动检查子分类和物品）
   - 普通用户只能查看分类树

【修复问题】
1. ✅ 修复 nodemailer API 方法名错误
   - createTransporter() → createTransport()

【文档更新】
1. ✅ 整合所有文档到单一 README.md
2. ✅ 更新版本号到 1.2.0
3. ✅ 添加新功能使用说明
4. ✅ 删除冗余文档（BUG_FIXES.md, PROJECT_STRUCTURE.md, UI功能增强.md）

【代码变更】
- backend/routes/users.js: +125 行（新增个人信息和修改密码API）
- backend/utils/emailService.js: 修复1处方法名错误
- frontend/index.html: +82 行（个人信息页面）
- frontend/app.js: +450 行（个人信息和分类管理功能）
- frontend/styles.css: +102 行（新增样式）

【升级说明】
- 后端需要重启：npm start
- 前端刷新浏览器即可
- 无数据库结构变更
- 支持零停机升级（使用 pm2 reload）

====================================

版本 1.1.0 - 2025-10-29
------------------------

【核心功能】
1. ✅ 用户管理（管理员/普通用户）
2. ✅ 物品管理（手动唯一编号）
3. ✅ 入库/出库管理
4. ✅ 快速归还功能
5. ✅ 分类管理（API）
6. ✅ 操作日志追溯
7. ✅ 自动邮件提醒

【初始发布】
- 完整的前后端实现
- MySQL 数据库
- JWT 认证
- 邮件提醒系统
- 定时任务

====================================
